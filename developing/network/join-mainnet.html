<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.27">
    <meta name="theme-color" content="#803eaf"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><title>Joining Mainnet | Osmosis Documentation</title><meta name="description" content="">
    <link rel="preload" href="/osmosis/assets/js/runtime~app.f127b715.js" as="script"><link rel="preload" href="/osmosis/assets/css/styles.891a5823.css" as="style"><link rel="preload" href="/osmosis/assets/js/597.1313da36.js" as="script"><link rel="preload" href="/osmosis/assets/js/app.ca714184.js" as="script">
    <link rel="stylesheet" href="/osmosis/assets/css/styles.891a5823.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-mix with-navbar"><header class="navbar"><div class="navbar-inner"><div class="site-brand"><div class="toggle-sidebar-button"><svg fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" shape-rendering="geometricPrecision" viewBox="0 0 24 24" height="1.5em" width="1.5em" style="color:currentcolor;"><path d="M3 12h18M3 6h18M3 18h18"></path></svg></div><a href="/osmosis/" class=""><div class="logo-box logo-with-title"><img class="logo" src="/osmosis/OSMOLogoTitleDark.png" alt="VuePress Mix Theme Logo"></div><strong class="site-brand-title can-hide">Documentation</strong></a></div><div class="navbar-links-wrapper can-hide"><nav class="navbar-links"><!--[--><div class="navbar-links-item"><a href="/osmosis/intro" class="nav-link" aria-label="Intro">Intro</a></div><div class="navbar-links-item"><a href="/osmosis/developing" class="nav-link router-link-active" aria-label="Develop">Develop</a></div><div class="navbar-links-item"><a href="/osmosis/validators/" class="nav-link" aria-label="Validate">Validate</a></div><div class="navbar-links-item"><a href="/osmosis/integrate/" class="nav-link" aria-label="Integrate">Integrate</a></div><div class="navbar-links-item"><a class="nav-link external" href="https://v2.vuepress.vuejs.org/" rel="noopener noreferrer" target="_blank" aria-label="Chat">Chat <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only"></span><!--]--></span></a></div><div class="navbar-links-item"><a class="nav-link external" href="https://github.com/osmosis-labs/osmosis" rel="noopener noreferrer" target="_blank" aria-label="GitHub">GitHub <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only"></span><!--]--></span></a></div><!--]--></nav></div><div class="navbar-right"><div class="navbar-features"><div class="navbar-features-item"><button type="button" aria-label="Toggle theme mode"><svg xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" shape-rendering="geometricPrecision" width="1.5em" height="1.5em" viewbox="0 0 24 24" class="icon-sun" role="presentation" style="color:currentColor;"><!--[--><g><circle cx="12" cy="12" r="5"></circle><path d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"></path></g><!--]--></svg></button></div></div><div id="docsearch-container"></div></div></div></header><div class="sidebar-mask"></div><div class="theme-layout"><aside class="sidebar"><div class="navbar-links-wrapper"><nav class="navbar-links"><!--[--><div class="navbar-links-item"><a href="/osmosis/intro" class="nav-link" aria-label="Intro">Intro</a></div><div class="navbar-links-item"><a href="/osmosis/developing" class="nav-link router-link-active" aria-label="Develop">Develop</a></div><div class="navbar-links-item"><a href="/osmosis/validators/" class="nav-link" aria-label="Validate">Validate</a></div><div class="navbar-links-item"><a href="/osmosis/integrate/" class="nav-link" aria-label="Integrate">Integrate</a></div><div class="navbar-links-item"><a class="nav-link external" href="https://v2.vuepress.vuejs.org/" rel="noopener noreferrer" target="_blank" aria-label="Chat">Chat <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only"></span><!--]--></span></a></div><div class="navbar-links-item"><a class="nav-link external" href="https://github.com/osmosis-labs/osmosis" rel="noopener noreferrer" target="_blank" aria-label="GitHub">GitHub <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only"></span><!--]--></span></a></div><!--]--></nav></div><div class="sidebar-inner"><ul class="sidebar-items"><!--[--><!--[--><li class="sidebar-item"><a class="sidebar-item-group" aria-label="Command Line"><span class="sidebar-item-group-title">Command Line</span><!----></a><ul class="sidebar-items sidebar-items-sub"><!--[--><!--[--><li class="sidebar-item"><a href="/osmosis/developing/cli" class="sidebar-item-link" aria-label="Command-line Guide"><span class="sidebar-item-text">Command-line Guide</span></a></li><!--]--><!--[--><li class="sidebar-item"><a href="/osmosis/developing/cli/install.html" class="sidebar-item-link" aria-label="Install Osmosis"><span class="sidebar-item-text">Install Osmosis</span></a></li><!--]--><!--]--></ul></li><!--]--><!--[--><li class="sidebar-item"><a class="sidebar-item-group" aria-label="Networks"><span class="sidebar-item-group-title">Networks</span><!----></a><ul class="sidebar-items sidebar-items-sub"><!--[--><!--[--><li class="sidebar-item"><a href="/osmosis/developing/network" class="sidebar-item-link" aria-label="Network"><span class="sidebar-item-text">Network</span></a></li><!--]--><!--[--><li class="sidebar-item"><a href="/osmosis/developing/network/join-testnet.html" class="sidebar-item-link" aria-label="Joining Testnet"><span class="sidebar-item-text">Joining Testnet</span></a></li><!--]--><!--[--><li class="sidebar-item active"><a aria-current="page" href="/osmosis/developing/network/join-mainnet.html" class="router-link-active router-link-exact-active sidebar-item-link" aria-label="Joining Mainnet"><span class="sidebar-item-text">Joining Mainnet</span></a></li><!--]--><!--]--></ul></li><!--]--><!--]--></ul></div></aside><main class="page"><div class="with-toc theme-mix-content-wrap"><div class="theme-mix-content"><!--[--><h1 id="joining-mainnet" tabindex="-1"><a class="header-anchor" href="#joining-mainnet" aria-hidden="true">#</a> Joining Mainnet</h1><p>Make sure you have <a href="../cli/install">installed the Osmosis Binary (CLI).</a></p><p>Use osmosisd to initialize your node (replace the NODE_NAME with a name of your choosing):</p><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#22272e;"><code><span class="line"><span style="color:#ADBAC7;">osmosisd init NODE_NAME</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>Download and place the genesis file in the osmosis config folder:</p><div class="language-text ext-text line-numbers-mode"><pre class="shiki" style="background-color:#22272e;"><code><span class="line"><span style="color:#adbac7;">wget -O ~/.osmosisd/config/genesis.json https://github.com/osmosis-labs/networks/raw/main/osmosis-1/genesis.json
</span></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>We will now set up cosmovisor to ensure any future upgrades happen flawlessly. To install Cosmovisor:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#22272e;"><code><span class="line"><span style="color:#6CB6FF;">cd</span><span style="color:#ADBAC7;"> $HOME</span></span>
<span class="line"><span style="color:#ADBAC7;">git clone https://github.com/cosmos/cosmos-sdk</span></span>
<span class="line"><span style="color:#6CB6FF;">cd</span><span style="color:#ADBAC7;"> cosmos-sdk</span></span>
<span class="line"><span style="color:#ADBAC7;">git checkout v0.42.9</span></span>
<span class="line"><span style="color:#ADBAC7;">make cosmovisor</span></span>
<span class="line"><span style="color:#ADBAC7;">cp cosmovisor/cosmovisor $GOPATH/bin/cosmovisor</span></span>
<span class="line"><span style="color:#6CB6FF;">cd</span><span style="color:#ADBAC7;"> $HOME</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>Create the required directories:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#22272e;"><code><span class="line"><span style="color:#ADBAC7;">mkdir -p </span><span style="color:#F47067;">~</span><span style="color:#ADBAC7;">/.osmosisd/cosmovisor</span></span>
<span class="line"><span style="color:#ADBAC7;">mkdir -p </span><span style="color:#F47067;">~</span><span style="color:#ADBAC7;">/.osmosisd/cosmovisor/genesis</span></span>
<span class="line"><span style="color:#ADBAC7;">mkdir -p </span><span style="color:#F47067;">~</span><span style="color:#ADBAC7;">/.osmosisd/cosmovisor/genesis/bin</span></span>
<span class="line"><span style="color:#ADBAC7;">mkdir -p </span><span style="color:#F47067;">~</span><span style="color:#ADBAC7;">/.osmosisd/cosmovisor/upgrades</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>Set the environment variables:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#22272e;"><code><span class="line"><span style="color:#6CB6FF;">echo</span><span style="color:#ADBAC7;"> </span><span style="color:#96D0FF;">&quot;# Setup Cosmovisor&quot;</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">&gt;&gt;</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">~</span><span style="color:#ADBAC7;">/.profile</span></span>
<span class="line"><span style="color:#6CB6FF;">echo</span><span style="color:#ADBAC7;"> </span><span style="color:#96D0FF;">&quot;export DAEMON_NAME=osmosisd&quot;</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">&gt;&gt;</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">~</span><span style="color:#ADBAC7;">/.profile</span></span>
<span class="line"><span style="color:#6CB6FF;">echo</span><span style="color:#ADBAC7;"> </span><span style="color:#96D0FF;">&quot;export DAEMON_HOME=</span><span style="color:#ADBAC7;">$HOME</span><span style="color:#96D0FF;">/.osmosisd&quot;</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">&gt;&gt;</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">~</span><span style="color:#ADBAC7;">/.profile</span></span>
<span class="line"><span style="color:#6CB6FF;">echo</span><span style="color:#ADBAC7;"> </span><span style="color:#96D0FF;">&quot;export DAEMON_ALLOW_DOWNLOAD_BINARIES=false&quot;</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">&gt;&gt;</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">~</span><span style="color:#ADBAC7;">/.profile</span></span>
<span class="line"><span style="color:#6CB6FF;">echo</span><span style="color:#ADBAC7;"> </span><span style="color:#96D0FF;">&quot;export DAEMON_LOG_BUFFER_SIZE=512&quot;</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">&gt;&gt;</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">~</span><span style="color:#ADBAC7;">/.profile</span></span>
<span class="line"><span style="color:#6CB6FF;">echo</span><span style="color:#ADBAC7;"> </span><span style="color:#96D0FF;">&quot;export DAEMON_RESTART_AFTER_UPGRADE=true&quot;</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">&gt;&gt;</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">~</span><span style="color:#ADBAC7;">/.profile</span></span>
<span class="line"><span style="color:#6CB6FF;">source</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">~</span><span style="color:#ADBAC7;">/.profile</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>Copy the current osmosisd binary into the cosmovisor/genesis folder:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#22272e;"><code><span class="line"><span style="color:#ADBAC7;">cp $GOPATH/bin/osmosisd </span><span style="color:#F47067;">~</span><span style="color:#ADBAC7;">/.osmosisd/cosmovisor/genesis/bin</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>To check your work, ensure the version of cosmovisor and osmosisd are the same:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#22272e;"><code><span class="line"><span style="color:#ADBAC7;">cosmovisor version</span></span>
<span class="line"><span style="color:#ADBAC7;">osmosisd version</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>These two command should both output 4.2.0</p><p>We must now download the latest chain data from a snapshot provider. In this example, I will use <a>https://quicksync.io/networks/osmosis.html</a> and I will use the pruned chain data. You may choose the default or archived based off your needs.</p><p>Download liblz4-tool to handle the compressed file:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#22272e;"><code><span class="line"><span style="color:#ADBAC7;">sudo apt-get install wget liblz4-tool aria2 -y</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>Before we download the chain data, we must first initialize the file name from quicksync. Hover over the download button from page linked above and you will see the file name (specifically the date and time). Replace the below with the timestamp listed for you:</p><p>EXAMPLE: If the download link is <a>https://get.quicksync.io/osmosis-1-pruned.20211119.0910.tar.lz4</a>, then</p><p>FILENAME=osmosis-1-pruned.20211119.0910.tar.lz4</p><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#22272e;"><code><span class="line"><span style="color:#ADBAC7;">FILENAME=osmosis-1-TYPE.DATE.TIME.tar.lz4</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>Download the chain data its corresponding checksum:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#22272e;"><code><span class="line"><span style="color:#6CB6FF;">cd</span><span style="color:#ADBAC7;"> $HOME/.osmosisd/</span></span>
<span class="line"><span style="color:#ADBAC7;">aria2c -x5 https://get.quicksync.io/$FILENAME</span></span>
<span class="line"><span style="color:#ADBAC7;">OR (single thread but no double space needed on harddisk)</span></span>
<span class="line"><span style="color:#ADBAC7;">wget -O - https://get.quicksync.io/$FILENAME </span><span style="color:#F47067;">|</span><span style="color:#ADBAC7;"> lz4 -d </span><span style="color:#F47067;">|</span><span style="color:#ADBAC7;"> tar -xvf -</span></span>
<span class="line"><span style="color:#ADBAC7;">wget https://raw.githubusercontent.com/chainlayer/quicksync-playbooks/master/roles/quicksync/files/checksum.sh</span></span>
<span class="line"><span style="color:#ADBAC7;">wget https://get.quicksync.io/$FILENAME.checksum</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>Compare the checksum with the onchain version:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#22272e;"><code><span class="line"><span style="color:#ADBAC7;">curl -s https://api-osmosis.cosmostation.io/v1/tx/hash/</span><span style="color:#96D0FF;">`curl -s https://get.quicksync.io/</span><span style="color:#ADBAC7;">$FILENAME</span><span style="color:#96D0FF;">.hash`</span><span style="color:#F47067;">|</span><span style="color:#ADBAC7;">jq -r </span><span style="color:#96D0FF;">&#39;.data.tx.body.memo&#39;</span><span style="color:#F47067;">|</span><span style="color:#ADBAC7;">sha512sum -c</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>The output should state &quot;checksum: OK&quot;</p><p>You are now ready to start the Osmosis Daemon through cosmovisor. Lets set up a service to allow cosmovisor to run in the background as well as restart automatically if it runs into any problems:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#22272e;"><code><span class="line"><span style="color:#6CB6FF;">echo</span><span style="color:#ADBAC7;"> </span><span style="color:#96D0FF;">&quot;[Unit]</span></span>
<span class="line"><span style="color:#96D0FF;">Description=Cosmovisor daemon</span></span>
<span class="line"><span style="color:#96D0FF;">After=network-online.target</span></span>
<span class="line"><span style="color:#96D0FF;">[Service]</span></span>
<span class="line"><span style="color:#96D0FF;">Environment=&quot;</span><span style="color:#ADBAC7;">DAEMON_NAME=osmosisd</span><span style="color:#96D0FF;">&quot;</span></span>
<span class="line"><span style="color:#96D0FF;">Environment=&quot;</span><span style="color:#ADBAC7;">DAEMON_HOME=${HOME}/.osmosisd</span><span style="color:#96D0FF;">&quot;</span></span>
<span class="line"><span style="color:#96D0FF;">Environment=&quot;</span><span style="color:#ADBAC7;">DAEMON_RESTART_AFTER_UPGRADE=true</span><span style="color:#96D0FF;">&quot;</span></span>
<span class="line"><span style="color:#96D0FF;">Environment=&quot;</span><span style="color:#ADBAC7;">DAEMON_ALLOW_DOWNLOAD_BINARIES=false</span><span style="color:#96D0FF;">&quot;</span></span>
<span class="line"><span style="color:#96D0FF;">Environment=&quot;</span><span style="color:#ADBAC7;">DAEMON_LOG_BUFFER_SIZE=512</span><span style="color:#96D0FF;">&quot;</span></span>
<span class="line"><span style="color:#96D0FF;">User=</span><span style="color:#ADBAC7;">$USER</span></span>
<span class="line"><span style="color:#96D0FF;">ExecStart=</span><span style="color:#ADBAC7;">${HOME}</span><span style="color:#96D0FF;">/go/bin/cosmovisor start</span></span>
<span class="line"><span style="color:#96D0FF;">Restart=always</span></span>
<span class="line"><span style="color:#96D0FF;">RestartSec=3</span></span>
<span class="line"><span style="color:#96D0FF;">LimitNOFILE=4096</span></span>
<span class="line"><span style="color:#96D0FF;">[Install]</span></span>
<span class="line"><span style="color:#96D0FF;">WantedBy=multi-user.target</span></span>
<span class="line"><span style="color:#96D0FF;">&quot;</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">&gt;</span><span style="color:#ADBAC7;">cosmovisor.service</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>Move this new file to the systemd directory:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#22272e;"><code><span class="line"><span style="color:#ADBAC7;">sudo mv cosmovisor.service /lib/systemd/system/cosmovisor.service</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>Reload and start the service:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#22272e;"><code><span class="line"><span style="color:#ADBAC7;">sudo systemctl daemon-reload</span></span>
<span class="line"><span style="color:#ADBAC7;">sudo systemctl start cosmovisor</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>Check the status of your service:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#22272e;"><code><span class="line"><span style="color:#ADBAC7;">sudo systemctl status cosmovisor</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>To see live logs of your service:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#22272e;"><code><span class="line"><span style="color:#ADBAC7;">journalctl -u cosmovisor -f</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>Guide as of 17 November 2021.</p><h2 id="joining-testnet" tabindex="-1"><a class="header-anchor" href="#joining-testnet" aria-hidden="true">#</a> Joining Testnet</h2><p>Start by ensuring your system is up to date:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#22272e;"><code><span class="line"><span style="color:#ADBAC7;">sudo apt update</span></span>
<span class="line"><span style="color:#ADBAC7;">sudo apt upgrade</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>Install tools if not already installed (git, gcc, make, etc.):</p><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#22272e;"><code><span class="line"><span style="color:#ADBAC7;">sudo apt install git build-essential ufw curl jq snapd --yes</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>Install go:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#22272e;"><code><span class="line"><span style="color:#ADBAC7;">wget -q -O - https://git.io/vQhTU </span><span style="color:#F47067;">|</span><span style="color:#ADBAC7;"> bash -s -- --version 1.17.2</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>After installed, open new terminal to properly load go</p><p>Clone the osmosis repo, checkout and install v3.2.0_with_cache:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#22272e;"><code><span class="line"><span style="color:#6CB6FF;">cd</span><span style="color:#ADBAC7;"> $HOME</span></span>
<span class="line"><span style="color:#ADBAC7;">git clone https://github.com/osmosis-labs/osmosis</span></span>
<span class="line"><span style="color:#6CB6FF;">cd</span><span style="color:#ADBAC7;"> osmosis</span></span>
<span class="line"><span style="color:#ADBAC7;">git checkout v3.2.0_with_cache</span></span>
<span class="line"><span style="color:#ADBAC7;">make install</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>You have now installed the Osmosis Daemon (osmosisd). Use osmosisd to initialize your node (replace the NODE_NAME with a name of your choosing):</p><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#22272e;"><code><span class="line"><span style="color:#ADBAC7;">osmosisd init NODE_NAME --chain-id=osmosis-testnet-0</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>We now need to open the config.toml to edit the seed list:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#22272e;"><code><span class="line"><span style="color:#6CB6FF;">cd</span><span style="color:#ADBAC7;"> $HOME/.osmosisd/config</span></span>
<span class="line"><span style="color:#ADBAC7;">nano config.toml</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>Use page down or arrow keys to get to the line that says seeds = &quot;&quot; and replace it with the following:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#22272e;"><code><span class="line"><span style="color:#ADBAC7;">seeds = </span><span style="color:#96D0FF;">&quot;4eaed17781cd948149098d55f80a28232a365236@testmosis.blockpane.com:26656&quot;</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>Then pres Ctrl+O, then enter to save, then Ctrl+X to exit</p><p>We will now set up cosmovisor to ensure the upgrade happens flawlessly. To install Cosmovisor:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#22272e;"><code><span class="line"><span style="color:#6CB6FF;">cd</span><span style="color:#ADBAC7;"> $HOME</span></span>
<span class="line"><span style="color:#ADBAC7;">git clone https://github.com/cosmos/cosmos-sdk</span></span>
<span class="line"><span style="color:#6CB6FF;">cd</span><span style="color:#ADBAC7;"> cosmos-sdk</span></span>
<span class="line"><span style="color:#ADBAC7;">git checkout v0.42.9</span></span>
<span class="line"><span style="color:#ADBAC7;">make cosmovisor</span></span>
<span class="line"><span style="color:#ADBAC7;">cp cosmovisor/cosmovisor $GOPATH/bin/cosmovisor</span></span>
<span class="line"><span style="color:#6CB6FF;">cd</span><span style="color:#ADBAC7;"> $HOME</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>Create the required directories:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#22272e;"><code><span class="line"><span style="color:#ADBAC7;">mkdir -p </span><span style="color:#F47067;">~</span><span style="color:#ADBAC7;">/.osmosisd/cosmovisor</span></span>
<span class="line"><span style="color:#ADBAC7;">mkdir -p </span><span style="color:#F47067;">~</span><span style="color:#ADBAC7;">/.osmosisd/cosmovisor/genesis</span></span>
<span class="line"><span style="color:#ADBAC7;">mkdir -p </span><span style="color:#F47067;">~</span><span style="color:#ADBAC7;">/.osmosisd/cosmovisor/genesis/bin</span></span>
<span class="line"><span style="color:#ADBAC7;">mkdir -p </span><span style="color:#F47067;">~</span><span style="color:#ADBAC7;">/.osmosisd/cosmovisor/upgrades</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>Set the environment variables:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#22272e;"><code><span class="line"><span style="color:#6CB6FF;">echo</span><span style="color:#ADBAC7;"> </span><span style="color:#96D0FF;">&quot;# Setup Cosmovisor&quot;</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">&gt;&gt;</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">~</span><span style="color:#ADBAC7;">/.profile</span></span>
<span class="line"><span style="color:#6CB6FF;">echo</span><span style="color:#ADBAC7;"> </span><span style="color:#96D0FF;">&quot;export DAEMON_NAME=osmosisd&quot;</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">&gt;&gt;</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">~</span><span style="color:#ADBAC7;">/.profile</span></span>
<span class="line"><span style="color:#6CB6FF;">echo</span><span style="color:#ADBAC7;"> </span><span style="color:#96D0FF;">&quot;export DAEMON_HOME=</span><span style="color:#ADBAC7;">$HOME</span><span style="color:#96D0FF;">/.osmosisd&quot;</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">&gt;&gt;</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">~</span><span style="color:#ADBAC7;">/.profile</span></span>
<span class="line"><span style="color:#6CB6FF;">echo</span><span style="color:#ADBAC7;"> </span><span style="color:#96D0FF;">&quot;export DAEMON_ALLOW_DOWNLOAD_BINARIES=false&quot;</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">&gt;&gt;</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">~</span><span style="color:#ADBAC7;">/.profile</span></span>
<span class="line"><span style="color:#6CB6FF;">echo</span><span style="color:#ADBAC7;"> </span><span style="color:#96D0FF;">&quot;export DAEMON_LOG_BUFFER_SIZE=512&quot;</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">&gt;&gt;</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">~</span><span style="color:#ADBAC7;">/.profile</span></span>
<span class="line"><span style="color:#6CB6FF;">echo</span><span style="color:#ADBAC7;"> </span><span style="color:#96D0FF;">&quot;export DAEMON_RESTART_AFTER_UPGRADE=true&quot;</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">&gt;&gt;</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">~</span><span style="color:#ADBAC7;">/.profile</span></span>
<span class="line"><span style="color:#6CB6FF;">source</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">~</span><span style="color:#ADBAC7;">/.profile</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>Download and replace the genesis file:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#22272e;"><code><span class="line"><span style="color:#6CB6FF;">cd</span><span style="color:#ADBAC7;"> $HOME/.osmosisd/config</span></span>
<span class="line"><span style="color:#ADBAC7;">wget https://github.com/osmosis-labs/networks/raw/unity/v4/osmosis-1/upgrades/v4/testnet/genesis.tar.bz2</span></span>
<span class="line"><span style="color:#ADBAC7;">tar -xjf genesis.tar.bz2</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>Copy the current osmosisd binary into the cosmovisor/genesis folder:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#22272e;"><code><span class="line"><span style="color:#ADBAC7;">cp $GOPATH/bin/osmosisd </span><span style="color:#F47067;">~</span><span style="color:#ADBAC7;">/.osmosisd/cosmovisor/genesis/bin</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>To check your work, ensure the version of cosmovisor and osmosisd are the same:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#22272e;"><code><span class="line"><span style="color:#ADBAC7;">cosmovisor version</span></span>
<span class="line"><span style="color:#ADBAC7;">osmosisd version</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>These two command should both output 3.1.0-23-g517562d</p><p>Before we start cosmovisor, lets prep the upgrade to v4.0.0-rc1:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#22272e;"><code><span class="line"><span style="color:#ADBAC7;">mkdir -p </span><span style="color:#F47067;">~</span><span style="color:#ADBAC7;">/.osmosisd/cosmovisor/upgrades/v4/bin</span></span>
<span class="line"><span style="color:#6CB6FF;">cd</span><span style="color:#ADBAC7;"> $HOME/osmosis</span></span>
<span class="line"><span style="color:#ADBAC7;">git checkout v4.0.0-rc1</span></span>
<span class="line"><span style="color:#ADBAC7;">make build</span></span>
<span class="line"><span style="color:#ADBAC7;">cp build/osmosisd </span><span style="color:#F47067;">~</span><span style="color:#ADBAC7;">/.osmosisd/cosmovisor/upgrades/v4/bin</span></span>
<span class="line"><span style="color:#6CB6FF;">cd</span><span style="color:#ADBAC7;"> $HOME</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>Reset private validator file to genesis state:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#22272e;"><code><span class="line"><span style="color:#ADBAC7;">osmosisd unsafe-reset-all</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>While we could start cosmovisor now with &quot;cosmovisor start&quot;, lets set up a service to allow cosmovisor to run in the background as well as restart automatically if it runs into any problems:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#22272e;"><code><span class="line"><span style="color:#6CB6FF;">echo</span><span style="color:#ADBAC7;"> </span><span style="color:#96D0FF;">&quot;[Unit]</span></span>
<span class="line"><span style="color:#96D0FF;">Description=Cosmovisor daemon</span></span>
<span class="line"><span style="color:#96D0FF;">After=network-online.target</span></span>
<span class="line"><span style="color:#96D0FF;">[Service]</span></span>
<span class="line"><span style="color:#96D0FF;">Environment=&quot;</span><span style="color:#ADBAC7;">DAEMON_NAME=osmosisd</span><span style="color:#96D0FF;">&quot;</span></span>
<span class="line"><span style="color:#96D0FF;">Environment=&quot;</span><span style="color:#ADBAC7;">DAEMON_HOME=${HOME}/.osmosisd</span><span style="color:#96D0FF;">&quot;</span></span>
<span class="line"><span style="color:#96D0FF;">Environment=&quot;</span><span style="color:#ADBAC7;">DAEMON_RESTART_AFTER_UPGRADE=true</span><span style="color:#96D0FF;">&quot;</span></span>
<span class="line"><span style="color:#96D0FF;">Environment=&quot;</span><span style="color:#ADBAC7;">DAEMON_ALLOW_DOWNLOAD_BINARIES=false</span><span style="color:#96D0FF;">&quot;</span></span>
<span class="line"><span style="color:#96D0FF;">Environment=&quot;</span><span style="color:#ADBAC7;">DAEMON_LOG_BUFFER_SIZE=512</span><span style="color:#96D0FF;">&quot;</span></span>
<span class="line"><span style="color:#96D0FF;">User=</span><span style="color:#ADBAC7;">$USER</span></span>
<span class="line"><span style="color:#96D0FF;">ExecStart=</span><span style="color:#ADBAC7;">${HOME}</span><span style="color:#96D0FF;">/go/bin/cosmovisor start</span></span>
<span class="line"><span style="color:#96D0FF;">Restart=always</span></span>
<span class="line"><span style="color:#96D0FF;">RestartSec=3</span></span>
<span class="line"><span style="color:#96D0FF;">LimitNOFILE=4096</span></span>
<span class="line"><span style="color:#96D0FF;">[Install]</span></span>
<span class="line"><span style="color:#96D0FF;">WantedBy=multi-user.target</span></span>
<span class="line"><span style="color:#96D0FF;">&quot;</span><span style="color:#ADBAC7;"> </span><span style="color:#F47067;">&gt;</span><span style="color:#ADBAC7;">cosmovisor.service</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>Move this new file to the systemd directory:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#22272e;"><code><span class="line"><span style="color:#ADBAC7;">sudo mv cosmovisor.service /lib/systemd/system/cosmovisor.service</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>Reload and start the service:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#22272e;"><code><span class="line"><span style="color:#ADBAC7;">sudo systemctl daemon-reload</span></span>
<span class="line"><span style="color:#ADBAC7;">sudo systemctl start cosmovisor</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>Check the status of your service:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#22272e;"><code><span class="line"><span style="color:#ADBAC7;">sudo systemctl status cosmovisor</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>To see live logs of your service:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#22272e;"><code><span class="line"><span style="color:#ADBAC7;">journalctl -u cosmovisor -f</span></span>
<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>The process should initialize and get to block 1122200, where it will automatically upgrade to v4.0.0-rc1</p><p>At around block height 1128853, when reading the logs you will see many notifications of &quot;slashing and jailing validator&quot;. This is due to fact that many validators did not participate in the testnet and therefore get jailed at the same time (approx 30,000 blocks after the upgrade). In my experience, this may cause your node to reset due to a memory error. As long as you set up the service above, it will automatically reset and eventually get passed this difficult block.</p><p>Guide as of 17 November 2021.</p><h2 id="relayers" tabindex="-1"><a class="header-anchor" href="#relayers" aria-hidden="true">#</a> Relayers</h2><!--]--><div class="page-meta"><a class="nav-link external meta-item-label edit-link" href="https://github.com/osmosis-labs/osmosis/edit/main/docs/developing/network/join-mainnet.md" rel="noopener noreferrer" target="_blank" aria-label="Edit this page">Edit this page <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only"></span><!--]--></span></a><div class="last-updated"><span class="meta-item-label">Last Updated: </span><span class="meta-item-info">11/22/2021, 8:50:53 PM</span></div></div><nav class="page-nav"><div class="inner"><span class="prev"> ← <a href="/osmosis/developing/network/join-testnet.html" class="nav-link" aria-label="Joining Testnet">Joining Testnet</a></span><!----></div></nav></div><div class="toc-wrap"><div class="theme-mix-toc"><div class="toc-mask"></div><button class="mobile-toc-title"><svg fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" shape-rendering="geometricPrecision" viewBox="0 0 24 24" height="1.5em" width="1.5em" style="color:currentcolor;"><path d="M21 10H7M21 6H3M21 14H3M21 18H7"></path></svg></button><div class="toc-items-wrap"><ul class="toc-items"><!--[--><li class="toc-level-2 toc-item"><a class="toc-anchor" href="#joining-testnet">Joining Testnet</a></li><li class="toc-level-2 toc-item"><a class="toc-anchor" href="#relayers">Relayers</a></li><!--]--></ul></div></div></div></div></main></div></div><!----><!----><!--]--></div>
    <script src="/osmosis/assets/js/runtime~app.f127b715.js" defer></script><script src="/osmosis/assets/js/597.1313da36.js" defer></script><script src="/osmosis/assets/js/app.ca714184.js" defer></script>
  </body>
</html>
