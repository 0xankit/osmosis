<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.27">
    <meta name="theme-color" content="#803eaf"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><title>Joining Testnet | null</title><meta name="description" content="Osmosis Documentation">
    <link rel="preload" href="/osmosis/assets/js/runtime~app.865ead06.js" as="script"><link rel="preload" href="/osmosis/assets/css/styles.6b630c31.css" as="style"><link rel="preload" href="/osmosis/assets/js/812.07eafcb2.js" as="script"><link rel="preload" href="/osmosis/assets/js/app.3eb33eaa.js" as="script">
    <link rel="stylesheet" href="/osmosis/assets/css/styles.6b630c31.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/osmosis/" class=""><!----><!----></a></span><div class="navbar-links-wrapper" style=""><!--[--><!--]--><nav class="navbar-links can-hide"><!--[--><div class="navbar-links-item"><a href="/osmosis/" class="nav-link" aria-label="Home"><!--[--><!--]--> Home <!--[--><!--]--></a></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="Network"><span class="title">Network</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="Network"><span class="title">Network</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/osmosis/network" class="nav-link router-link-active" aria-label="Network"><!--[--><!--]--> Network <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/osmosis/validators" class="nav-link" aria-label="Validators"><!--[--><!--]--> Validators <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><!--]--></nav><!--[--><!--]--><button class="toggle-dark-button" title="toggle dark mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-links"><!--[--><div class="navbar-links-item"><a href="/osmosis/" class="nav-link" aria-label="Home"><!--[--><!--]--> Home <!--[--><!--]--></a></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="Network"><span class="title">Network</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="Network"><span class="title">Network</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/osmosis/network" class="nav-link router-link-active" aria-label="Network"><!--[--><!--]--> Network <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/osmosis/validators" class="nav-link" aria-label="Validators"><!--[--><!--]--> Validators <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-links"><!--[--><!--[--><p class="sidebar-heading sidebar-item">About</p><ul class=""><li><!--[--><a href="/osmosis/intro" class="nav-link sidebar-item" aria-label="Introduction"><!--[--><!--]--> Introduction <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/osmosis/intro/terminology.html" class="nav-link sidebar-item" aria-label="Termonology"><!--[--><!--]--> Termonology <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/osmosis/osmo" class="nav-link sidebar-item" aria-label="OSMO"><!--[--><!--]--> OSMO <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/osmosis/governance" class="nav-link sidebar-item" aria-label="Governance"><!--[--><!--]--> Governance <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/osmosis/other-features" class="nav-link sidebar-item" aria-label="/other-features"><!--[--><!--]--> /other-features <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--><!--[--><p class="sidebar-heading sidebar-item">Wallets</p><ul class=""><li><!--[--><a href="/osmosis/wallets" class="nav-link sidebar-item" aria-label="Wallets"><!--[--><!--]--> Wallets <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--><!--[--><p class="sidebar-heading sidebar-item">Liquidity</p><ul class=""><li><!--[--><a href="/osmosis/liquidity" class="nav-link sidebar-item" aria-label="Liquidity Providing"><!--[--><!--]--> Liquidity Providing <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/osmosis/liquidity/liquidity-bootstraping.html" class="nav-link sidebar-item" aria-label="LBPs"><!--[--><!--]--> LBPs <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--><!--[--><p class="sidebar-heading sidebar-item">Command Line</p><ul class=""><li><!--[--><a href="/osmosis/cli" class="nav-link sidebar-item" aria-label="Command-line Guide"><!--[--><!--]--> Command-line Guide <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/osmosis/cli/install.html" class="nav-link sidebar-item" aria-label="Install Osmosis"><!--[--><!--]--> Install Osmosis <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--><!--[--><p class="sidebar-heading sidebar-item active">Networks</p><ul class=""><li><!--[--><a href="/osmosis/network" class="nav-link router-link-active sidebar-item" aria-label="Network"><!--[--><!--]--> Network <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/osmosis/network/join-testnet.html" class="router-link-active router-link-exact-active nav-link router-link-active sidebar-item active" aria-label="Joining Testnet"><!--[--><!--]--> Joining Testnet <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/osmosis/network/join-mainnet.html" class="nav-link sidebar-item" aria-label="Joining Mainnet"><!--[--><!--]--> Joining Mainnet <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--><!--[--><p class="sidebar-heading sidebar-item">Validating</p><ul class=""><li><!--[--><a href="/osmosis/validators" class="nav-link sidebar-item" aria-label="Validators"><!--[--><!--]--> Validators <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--><!--[--><p class="sidebar-heading sidebar-item">Integrate</p><ul class=""><li><!--[--><a href="/osmosis/integrate" class="nav-link sidebar-item" aria-label="Integrate"><!--[--><!--]--> Integrate <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/osmosis/integrate/token-listings.html" class="nav-link sidebar-item" aria-label="Token Listings"><!--[--><!--]--> Token Listings <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><h1 id="joining-testnet" tabindex="-1"><a class="header-anchor" href="#joining-testnet" aria-hidden="true">#</a> Joining Testnet</h1><p>Make sure you have <a href="../cli/install">installed the Osmosis Binary (CLI).</a></p><p>Use osmosisd to initialize your node (replace the NODE_NAME with a name of your choosing):</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>osmosisd init NODE_NAME
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>Download and place the genesis file in the osmosis config folder:</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>wget -O ~/.osmosisd/config/genesis.json https://github.com/osmosis-labs/networks/raw/main/osmosis-1/genesis.json
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>We will now set up cosmovisor to ensure any future upgrades happen flawlessly. To install Cosmovisor:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token builtin class-name">cd</span> <span class="token environment constant">$HOME</span>
<span class="token function">git</span> clone https://github.com/cosmos/cosmos-sdk
<span class="token builtin class-name">cd</span> cosmos-sdk
<span class="token function">git</span> checkout v0.42.9
<span class="token function">make</span> cosmovisor
<span class="token function">cp</span> cosmovisor/cosmovisor <span class="token variable">$GOPATH</span>/bin/cosmovisor
<span class="token builtin class-name">cd</span> <span class="token environment constant">$HOME</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>Create the required directories:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">mkdir</span> -p ~/.osmosisd/cosmovisor
<span class="token function">mkdir</span> -p ~/.osmosisd/cosmovisor/genesis
<span class="token function">mkdir</span> -p ~/.osmosisd/cosmovisor/genesis/bin
<span class="token function">mkdir</span> -p ~/.osmosisd/cosmovisor/upgrades
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>Set the environment variables:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token builtin class-name">echo</span> <span class="token string">&quot;# Setup Cosmovisor&quot;</span> <span class="token operator">&gt;&gt;</span> ~/.profile
<span class="token builtin class-name">echo</span> <span class="token string">&quot;export DAEMON_NAME=osmosisd&quot;</span> <span class="token operator">&gt;&gt;</span> ~/.profile
<span class="token builtin class-name">echo</span> <span class="token string">&quot;export DAEMON_HOME=<span class="token environment constant">$HOME</span>/.osmosisd&quot;</span> <span class="token operator">&gt;&gt;</span> ~/.profile
<span class="token builtin class-name">echo</span> <span class="token string">&quot;export DAEMON_ALLOW_DOWNLOAD_BINARIES=false&quot;</span> <span class="token operator">&gt;&gt;</span> ~/.profile
<span class="token builtin class-name">echo</span> <span class="token string">&quot;export DAEMON_LOG_BUFFER_SIZE=512&quot;</span> <span class="token operator">&gt;&gt;</span> ~/.profile
<span class="token builtin class-name">echo</span> <span class="token string">&quot;export DAEMON_RESTART_AFTER_UPGRADE=true&quot;</span> <span class="token operator">&gt;&gt;</span> ~/.profile
<span class="token builtin class-name">source</span> ~/.profile
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>Copy the current osmosisd binary into the cosmovisor/genesis folder:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">cp</span> <span class="token variable">$GOPATH</span>/bin/osmosisd ~/.osmosisd/cosmovisor/genesis/bin
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>To check your work, ensure the version of cosmovisor and osmosisd are the same:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>cosmovisor version
osmosisd version
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>These two command should both output 4.2.0</p><p>We must now download the latest chain data from a snapshot provider. In this example, I will use <a>https://quicksync.io/networks/osmosis.html</a> and I will use the pruned chain data. You may choose the default or archived based off your needs.</p><p>Download liblz4-tool to handle the compressed file:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> <span class="token function">wget</span> liblz4-tool aria2 -y
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>Before we download the chain data, we must first initialize the file name from quicksync. Hover over the download button from page linked above and you will see the file name (specifically the date and time). Replace the below with the timestamp listed for you:</p><p>EXAMPLE: If the download link is <a>https://get.quicksync.io/osmosis-1-pruned.20211119.0910.tar.lz4</a>, then</p><p>FILENAME=osmosis-1-pruned.20211119.0910.tar.lz4</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token assign-left variable">FILENAME</span><span class="token operator">=</span>osmosis-1-TYPE.DATE.TIME.tar.lz4
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>Download the chain data its corresponding checksum:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token builtin class-name">cd</span> <span class="token environment constant">$HOME</span>/.osmosisd/
aria2c -x5 https://get.quicksync.io/<span class="token variable">$FILENAME</span>
OR <span class="token punctuation">(</span>single thread but no double space needed on harddisk<span class="token punctuation">)</span>
<span class="token function">wget</span> -O - https://get.quicksync.io/<span class="token variable">$FILENAME</span> <span class="token operator">|</span> lz4 -d <span class="token operator">|</span> <span class="token function">tar</span> -xvf -
<span class="token function">wget</span> https://raw.githubusercontent.com/chainlayer/quicksync-playbooks/master/roles/quicksync/files/checksum.sh
<span class="token function">wget</span> https://get.quicksync.io/<span class="token variable">$FILENAME</span>.checksum
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>Compare the checksum with the onchain version:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">curl</span> -s https://api-osmosis.cosmostation.io/v1/tx/hash/<span class="token variable"><span class="token variable">`</span><span class="token function">curl</span> -s https://get.quicksync.io/$FILENAME.hash<span class="token variable">`</span></span><span class="token operator">|</span>jq -r <span class="token string">&#39;.data.tx.body.memo&#39;</span><span class="token operator">|</span>sha512sum -c
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>The output should state &quot;checksum: OK&quot;</p><p>You are now ready to start the Osmosis Daemon through cosmovisor. Lets set up a service to allow cosmovisor to run in the background as well as restart automatically if it runs into any problems:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token builtin class-name">echo</span> <span class="token string">&quot;[Unit]
Description=Cosmovisor daemon
After=network-online.target
[Service]
Environment=&quot;</span><span class="token assign-left variable">DAEMON_NAME</span><span class="token operator">=</span>osmosisd<span class="token string">&quot;
Environment=&quot;</span><span class="token assign-left variable">DAEMON_HOME</span><span class="token operator">=</span><span class="token variable">${<span class="token environment constant">HOME</span>}</span>/.osmosisd<span class="token string">&quot;
Environment=&quot;</span><span class="token assign-left variable">DAEMON_RESTART_AFTER_UPGRADE</span><span class="token operator">=</span>true<span class="token string">&quot;
Environment=&quot;</span><span class="token assign-left variable">DAEMON_ALLOW_DOWNLOAD_BINARIES</span><span class="token operator">=</span>false<span class="token string">&quot;
Environment=&quot;</span><span class="token assign-left variable">DAEMON_LOG_BUFFER_SIZE</span><span class="token operator">=</span><span class="token number">512</span><span class="token string">&quot;
User=<span class="token environment constant">$USER</span>
ExecStart=<span class="token variable">${<span class="token environment constant">HOME</span>}</span>/go/bin/cosmovisor start
Restart=always
RestartSec=3
LimitNOFILE=4096
[Install]
WantedBy=multi-user.target
&quot;</span> <span class="token operator">&gt;</span>cosmovisor.service
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>Move this new file to the systemd directory:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">mv</span> cosmovisor.service /lib/systemd/system/cosmovisor.service
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>Reload and start the service:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">sudo</span> systemctl daemon-reload
<span class="token function">sudo</span> systemctl start cosmovisor
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>Check the status of your service:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">sudo</span> systemctl status cosmovisor
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>To see live logs of your service:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>journalctl -u cosmovisor -f
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>Guide as of 17 November 2021.</p><h2 id="joining-testnet-1" tabindex="-1"><a class="header-anchor" href="#joining-testnet-1" aria-hidden="true">#</a> Joining Testnet</h2><p>Start by ensuring your system is up to date:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">apt</span> update
<span class="token function">sudo</span> <span class="token function">apt</span> upgrade
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>Install tools if not already installed (git, gcc, make, etc.):</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> <span class="token function">git</span> build-essential ufw <span class="token function">curl</span> jq snapd --yes
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>Install go:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">wget</span> -q -O - https://git.io/vQhTU <span class="token operator">|</span> <span class="token function">bash</span> -s -- --version <span class="token number">1.17</span>.2
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>After installed, open new terminal to properly load go</p><p>Clone the osmosis repo, checkout and install v3.2.0_with_cache:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token builtin class-name">cd</span> <span class="token environment constant">$HOME</span>
<span class="token function">git</span> clone https://github.com/osmosis-labs/osmosis
<span class="token builtin class-name">cd</span> osmosis
<span class="token function">git</span> checkout v3.2.0_with_cache
<span class="token function">make</span> <span class="token function">install</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>You have now installed the Osmosis Daemon (osmosisd). Use osmosisd to initialize your node (replace the NODE_NAME with a name of your choosing):</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>osmosisd init NODE_NAME --chain-id<span class="token operator">=</span>osmosis-testnet-0
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>We now need to open the config.toml to edit the seed list:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token builtin class-name">cd</span> <span class="token environment constant">$HOME</span>/.osmosisd/config
<span class="token function">nano</span> config.toml
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>Use page down or arrow keys to get to the line that says seeds = &quot;&quot; and replace it with the following:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>seeds <span class="token operator">=</span> <span class="token string">&quot;4eaed17781cd948149098d55f80a28232a365236@testmosis.blockpane.com:26656&quot;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>Then pres Ctrl+O, then enter to save, then Ctrl+X to exit</p><p>We will now set up cosmovisor to ensure the upgrade happens flawlessly. To install Cosmovisor:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token builtin class-name">cd</span> <span class="token environment constant">$HOME</span>
<span class="token function">git</span> clone https://github.com/cosmos/cosmos-sdk
<span class="token builtin class-name">cd</span> cosmos-sdk
<span class="token function">git</span> checkout v0.42.9
<span class="token function">make</span> cosmovisor
<span class="token function">cp</span> cosmovisor/cosmovisor <span class="token variable">$GOPATH</span>/bin/cosmovisor
<span class="token builtin class-name">cd</span> <span class="token environment constant">$HOME</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>Create the required directories:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">mkdir</span> -p ~/.osmosisd/cosmovisor
<span class="token function">mkdir</span> -p ~/.osmosisd/cosmovisor/genesis
<span class="token function">mkdir</span> -p ~/.osmosisd/cosmovisor/genesis/bin
<span class="token function">mkdir</span> -p ~/.osmosisd/cosmovisor/upgrades
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>Set the environment variables:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token builtin class-name">echo</span> <span class="token string">&quot;# Setup Cosmovisor&quot;</span> <span class="token operator">&gt;&gt;</span> ~/.profile
<span class="token builtin class-name">echo</span> <span class="token string">&quot;export DAEMON_NAME=osmosisd&quot;</span> <span class="token operator">&gt;&gt;</span> ~/.profile
<span class="token builtin class-name">echo</span> <span class="token string">&quot;export DAEMON_HOME=<span class="token environment constant">$HOME</span>/.osmosisd&quot;</span> <span class="token operator">&gt;&gt;</span> ~/.profile
<span class="token builtin class-name">echo</span> <span class="token string">&quot;export DAEMON_ALLOW_DOWNLOAD_BINARIES=false&quot;</span> <span class="token operator">&gt;&gt;</span> ~/.profile
<span class="token builtin class-name">echo</span> <span class="token string">&quot;export DAEMON_LOG_BUFFER_SIZE=512&quot;</span> <span class="token operator">&gt;&gt;</span> ~/.profile
<span class="token builtin class-name">echo</span> <span class="token string">&quot;export DAEMON_RESTART_AFTER_UPGRADE=true&quot;</span> <span class="token operator">&gt;&gt;</span> ~/.profile
<span class="token builtin class-name">source</span> ~/.profile
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>Download and replace the genesis file:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token builtin class-name">cd</span> <span class="token environment constant">$HOME</span>/.osmosisd/config
<span class="token function">wget</span> https://github.com/osmosis-labs/networks/raw/unity/v4/osmosis-1/upgrades/v4/testnet/genesis.tar.bz2
<span class="token function">tar</span> -xjf genesis.tar.bz2
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>Copy the current osmosisd binary into the cosmovisor/genesis folder:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">cp</span> <span class="token variable">$GOPATH</span>/bin/osmosisd ~/.osmosisd/cosmovisor/genesis/bin
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>To check your work, ensure the version of cosmovisor and osmosisd are the same:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>cosmovisor version
osmosisd version
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>These two command should both output 3.1.0-23-g517562d</p><p>Before we start cosmovisor, lets prep the upgrade to v4.0.0-rc1:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">mkdir</span> -p ~/.osmosisd/cosmovisor/upgrades/v4/bin
<span class="token builtin class-name">cd</span> <span class="token environment constant">$HOME</span>/osmosis
<span class="token function">git</span> checkout v4.0.0-rc1
<span class="token function">make</span> build
<span class="token function">cp</span> build/osmosisd ~/.osmosisd/cosmovisor/upgrades/v4/bin
<span class="token builtin class-name">cd</span> <span class="token environment constant">$HOME</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>Reset private validator file to genesis state:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>osmosisd unsafe-reset-all
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>While we could start cosmovisor now with &quot;cosmovisor start&quot;, lets set up a service to allow cosmovisor to run in the background as well as restart automatically if it runs into any problems:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token builtin class-name">echo</span> <span class="token string">&quot;[Unit]
Description=Cosmovisor daemon
After=network-online.target
[Service]
Environment=&quot;</span><span class="token assign-left variable">DAEMON_NAME</span><span class="token operator">=</span>osmosisd<span class="token string">&quot;
Environment=&quot;</span><span class="token assign-left variable">DAEMON_HOME</span><span class="token operator">=</span><span class="token variable">${<span class="token environment constant">HOME</span>}</span>/.osmosisd<span class="token string">&quot;
Environment=&quot;</span><span class="token assign-left variable">DAEMON_RESTART_AFTER_UPGRADE</span><span class="token operator">=</span>true<span class="token string">&quot;
Environment=&quot;</span><span class="token assign-left variable">DAEMON_ALLOW_DOWNLOAD_BINARIES</span><span class="token operator">=</span>false<span class="token string">&quot;
Environment=&quot;</span><span class="token assign-left variable">DAEMON_LOG_BUFFER_SIZE</span><span class="token operator">=</span><span class="token number">512</span><span class="token string">&quot;
User=<span class="token environment constant">$USER</span>
ExecStart=<span class="token variable">${<span class="token environment constant">HOME</span>}</span>/go/bin/cosmovisor start
Restart=always
RestartSec=3
LimitNOFILE=4096
[Install]
WantedBy=multi-user.target
&quot;</span> <span class="token operator">&gt;</span>cosmovisor.service
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>Move this new file to the systemd directory:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">mv</span> cosmovisor.service /lib/systemd/system/cosmovisor.service
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>Reload and start the service:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">sudo</span> systemctl daemon-reload
<span class="token function">sudo</span> systemctl start cosmovisor
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>Check the status of your service:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">sudo</span> systemctl status cosmovisor
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>To see live logs of your service:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>journalctl -u cosmovisor -f
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>The process should initialize and get to block 1122200, where it will automatically upgrade to v4.0.0-rc1</p><p>At around block height 1128853, when reading the logs you will see many notifications of &quot;slashing and jailing validator&quot;. This is due to fact that many validators did not participate in the testnet and therefore get jailed at the same time (approx 30,000 blocks after the upgrade). In my experience, this may cause your node to reset due to a memory error. As long as you set up the service above, it will automatically reset and eventually get passed this difficult block.</p><p>Guide as of 17 November 2021.</p><h2 id="relayers" tabindex="-1"><a class="header-anchor" href="#relayers" aria-hidden="true">#</a> Relayers</h2><!--]--></div><footer class="page-meta"><!----><!----><div class="meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: contact@nevulas.com">Daniel Farina</span><!----><!--]--><!--]--></span></div></footer><nav class="page-nav"><p class="inner"><span class="prev"> ← <a href="/osmosis/network" class="nav-link router-link-active" aria-label="Network"><!--[--><!--]--> Network <!--[--><!--]--></a></span><span class="next"><a href="/osmosis/network/join-mainnet.html" class="nav-link" aria-label="Joining Mainnet"><!--[--><!--]--> Joining Mainnet <!--[--><!--]--></a> → </span></p></nav><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script src="/osmosis/assets/js/runtime~app.865ead06.js" defer></script><script src="/osmosis/assets/js/812.07eafcb2.js" defer></script><script src="/osmosis/assets/js/app.3eb33eaa.js" defer></script>
  </body>
</html>
